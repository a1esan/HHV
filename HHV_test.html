<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HHV cal Test</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-blue: #003366;
    --dark-footer: #1a2533;
    --accent-yellow: #f5c242;
    --text-grey: #666;
    --input-bg: #f3f6f9; /* สีพื้นหลังช่องกรอกข้อมูล */
    --result-blue: #8bcae6; /* สีฟ้ากล่องผลลัพธ์ */
  }

  body {
    font-family: 'Sarabun', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #fff;
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* --- 1. Header (คงเดิม) --- */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 40px;
    background-color: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    border-bottom: 1px solid #eee;
  }
  .header-left { display: flex; align-items: center; gap: 15px; }
  .logos { display: flex; gap: 10px; align-items: center; }
  .logos img { height: 50px; width: auto; }
  .brand-text { border-left: 1px solid #ddd; padding-left: 15px; }
  .brand-text h1 { font-size: 1.2rem; font-weight: 700; color: var(--primary-blue); margin: 0; }
  .brand-text p { font-size: 0.8rem; color: var(--text-grey); margin: 0; }
  .header-right { display: flex; align-items: center; gap: 20px; }
  .nav-link { text-decoration: none; color: var(--text-grey); font-size: 0.95rem; }
  .lang-switch { border: 1px solid var(--primary-blue); border-radius: 20px; padding: 4px 15px; color: var(--primary-blue); font-size: 0.9rem; cursor: pointer; }
  .hamburger { font-size: 1.5rem; color: var(--primary-blue); cursor: pointer; }

/* ================== ส่วนที่เพิ่ม: CSS สำหรับ Side Menu (เพื่อให้เด้งออกมาเหมือนในรูป) ================== */
  .menu-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6); display: none; z-index: 999;
  }
  .menu-overlay.active { display: block; }

  .side-menu {
    position: fixed; top: 0; right: -400px;
    width: 350px; height: 100%;
    background-color: #1a2533; z-index: 1000;
    transition: 0.4s ease; box-shadow: -5px 0 15px rgba(0,0,0,0.3);
    border-radius: 20px 0 0 20px; color: white; overflow-y: auto;
  }
  .side-menu.active { right: 0; }
  .menu-content { padding: 40px 25px; text-align: center; }
  .close-btn { position: absolute; top: 20px; left: 20px; font-size: 2rem; cursor: pointer; color: white; }
  .menu-links { display: flex; flex-direction: column; gap: 12px; margin-top: 30px; }
  .menu-links a {
    display: block; padding: 14px; color: white; text-decoration: none;
    border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; transition: 0.3s;
    font-size: 0.95rem; text-align: left;
  }
  .menu-links a:hover { background-color: rgba(255,255,255,0.1); color: var(--accent-yellow); border-color: white; }
  /* ========================================================================================= */


  /* --- 2. Hero Section (แก้ไขและเพิ่มเติม) --- */
  .hero {
    text-align: center;
    padding: 60px 20px 80px 20px;
    max-width: 1200px;
    margin: 0 auto;
    flex: 1;
  }
  .hero h2 { font-size: 2.2rem; color: var(--primary-blue); margin-bottom: 10px; font-weight: 600; }
  .hero p.subtitle { font-size: 1rem; color: var(--text-grey); margin-bottom: 50px; line-height: 1.6; }

 /* --- ส่วนที่เพิ่มใหม่: Calculation Layout --- */

  .calculation-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap; /* รองรับมือถือ (ปัดตกบรรทัด) */
  }

  /* แก้ไข: ปรับเป็น 3 คอลัมน์ */
  .input-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* แบ่ง 3 ช่องเท่ากัน */
    gap: 20px 25px;
    width: 100%;
  }

   /* Input */
  .input-group {
    display: flex;
    flex-direction: column;
    text-align: left;
  }

  .input-group label {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 8px;
    font-weight: 500;
  }

  .input-box {
    width: 100%;
    padding: 12px 15px;
    background-color: var(--input-bg);
    border: 1px solid transparent;
    border-radius: 10px;
    font-size: 1rem;
    color: #333;
    box-sizing: border-box;
    outline: none;
    transition: 0.2s;
  }

  .input-box:focus {
    border-color: var(--result-blue);
    background-color: #fff;
    box-shadow: 0 0 0 3px rgba(139, 202, 230, 0.2);
  }

  /* ปุ่มกดให้กางเต็ม 3 คอลัมน์ */
  .btn-calculate {
    grid-column: span 3;
    padding: 16px;
    background: var(--primary-blue);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    font-weight: bold;
    width: 100%;
    margin-top: 10px;
    transition: 0.3s;
  }
  .btn-calculate:hover { background: #002244; transform: translateY(-2px); }

  /* ปรับคอนเทนเนอร์หุ้ม Output */
  .output-col {
    width: 100%;             /* กางเต็มพื้นที่ */
    max-width: 1000px;       /* เท่ากับความกว้างของช่อง Input ด้านบน */
    margin: 30px auto 0;
    display: flex;           /* ใช้ flex เพื่อจัดกลุ่มให้อยู่กลาง */
    justify-content: center;
  }

  /* เจาะจงไปที่ input-group ที่อยู่ใน output-col */
  .output-col .input-group {
    width: 100%;             /* ให้กลุ่มนี้กางเต็ม */
    align-items: center;     /* จัด Label และ Box ให้อยู่กึ่งกลางแนวตั้ง */
    text-align: center;      /* จัดตัวอักษรให้อยู่กลาง */
  }

  .output-box {
    width: 100%;             /* กางให้ยาวเท่ากับ 3 คอลัมน์ข้างบน */
    height: 100px;
    background-color: var(--result-blue);
    border-radius: 15px;
    display: flex;           /* ใช้ flex เพื่อจัดตัวเลข */
    align-items: center;     /* จัดตัวเลขให้อยู่กลางแนวตั้ง */
    justify-content: center; /* จัดตัวเลขให้อยู่กลางแนวนอน */
    font-size: 2.5rem;       
    font-weight: bold;
    color: white;
    margin-top: 10px;
    box-shadow: 0 4px 15px rgba(139, 202, 230, 0.4);
  }

/* คอนเทนเนอร์ใหม่ */
.second-calculator {
    margin-top: 50px;
    padding-top: 30px;
    border-top: 2px dashed #eee;
}

/* จัดให้ Input, ปุ่ม, และผลลัพธ์ เรียงแถวเดียวกัน */
.new-calc-row {
    display: flex;
    align-items: flex-end; /* ให้ปุ่มกับกล่องวางระดับฐานเท่ากัน */
    justify-content: center;
    gap: 20px;
    width: 100%;
    max-width: 1000px;
    flex-wrap: wrap; /* ถ้าจอเล็กจะปัดลงบรรทัดใหม่ให้เอง */
}

/* ปรับขนาดปุ่มใหม่ไม่ให้ใหญ่เกินไป */
.small-btn {
    width: auto !important;
    padding: 12px 30px !important;
    height: 48px;
    margin-top: 0 !important;
}

/* ปรับขนาดกล่องผลลัพธ์ใหม่ */
.small-output {
    width: 200px !important;
    height: 48px !important;
    font-size: 1.2rem !important;
    margin-top: 0 !important;
}

/* รองรับมือถือ */
@media (max-width: 768px) {
    .new-calc-row {
        flex-direction: column;
        align-items: center;
    }
    .small-output { width: 100% !important; }
}

   /* ================== CSS Footer (คงเดิม) ================== */
  footer {
    background-color: #161F2B;
    color: #ffffff;
    font-family: 'Sarabun', sans-serif;
    margin-top: auto;
  }
  .footer-content {
    display: flex;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding: 60px 20px;
  }
  .f-col-info { flex: 2; padding-right: 40px; }
  .f-col-info h3 { margin: 5px 0; font-size: 1.1rem; }
  .f-col-info p { color: #ccc; font-size: 0.9rem; margin-top: 10px; line-height: 1.6; }
  .f-col-menu { flex: 1; border-left: 1px dashed rgba(255,255,255,0.3); padding-left: 40px; }
  .f-col-contact { flex: 1.5; border-left: 1px dashed rgba(255,255,255,0.3); padding-left: 40px; }
  .f-title { font-weight: bold; margin-bottom: 20px; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; }
  .f-links { list-style: none; padding: 0; }
  .f-links li { margin-bottom: 12px; }
  .f-links a { color: #dddddd; text-decoration: none; transition: 0.3s; }
  .f-links a:hover { color: #ffca28; }
  .contact-detail p { margin-bottom: 8px; color: #ccc; font-size: 0.9rem; }
  .copyright { background-color: #0f151d; text-align: center; padding: 20px; font-size: 0.8rem; color: #666; border-top: 1px solid rgba(255,255,255,0.05); }

  /* Responsive การย่อหน้าจอ */
  @media (max-width: 992px) {
    .input-grid { grid-template-columns: 1fr 1fr; } /* จอกลางเหลือ 2 คอลัมน์ */
    .btn-calculate { grid-column: span 2; }
  }

  @media (max-width: 600px) {
    .input-grid { grid-template-columns: 1fr; } /* จอมือถือเหลือ 1 คอลัมน์ */
    .btn-calculate { grid-column: span 1; }
    .footer-content { flex-direction: column; gap: 40px; }
    .f-col-menu, .f-col-contact { border-left: none; padding-left: 0; }
  }
</style>
</head>
<body>

  <div id="menuOverlay" class="menu-overlay" onclick="toggleMenu()"></div>
  <div id="sideMenu" class="side-menu">
      <div class="menu-content">
          <div class="close-btn" onclick="toggleMenu()">×</div>
          <div class="menu-header">
              <h2>WIRC-MSW Model</h2>
              <p>Mathematical Model for MSW in Developing Countries</p>
          </div>
          <nav class="menu-links">
              <a href="index.html" onclick="toggleMenu()">Home</a>
              <a href="HHV_test.html" onclick="toggleMenu()">HHV Calculator</a>
              <a href="PPformularTest1.html" onclick="toggleMenu()">Power Plant Performance</a>  
              <a href="manual.html" onclick="toggleMenu()">User Manual</a>
              <a href="#" onclick="toggleMenu()">Contact Us</a>
          </nav>
      </div>
  </div>

  <header>
    <div class="header-left">
      <div class="logos">
        <img src="image/KMUTNB LOGO.png" style="height: 50px;">
        <img src="image/MAE LOGO.png" style="height: 50px;">
        <img src="image/WRIC LOGO.png" style="height: 50px;">
      </div>

      <div class="brand-text">
        <h1>WIRC-MSW Model</h1>
        <p>Mathematical Model for MSW in Developing Countries</p>
      </div>
    </div>
    <div class="header-right">
      <a href="manual.html" class="nav-link">User Manual</a>
      <div class="lang-switch">TH | EN</div>
      <div class="hamburger" onclick="toggleMenu()">☰</div>
    </div>
  </header>

  <section class="hero">
    <h2>Heating Value Prediction (HHV)</h2>
    <p class="subtitle">
      Analyze waste physical composition to predict HHV. An ideal solution for quick and efficient initial fuel assessment 
    </p>

    <div class="calculation-container">

    <div class="input-grid">
    <div class="input-group">
        <label>1. Food Waste (%wt)</label>
        <input type="number" id="input_fw" class="input-box" >
    </div>
    <div class="input-group">
        <label>2. Paper (%wt)</label>
        <input type="number" id="input_pa" class="input-box" >
    </div>
    <div class="input-group">
        <label>3. Plastic and Foam (%wt)</label>
        <input type="number" id="input_pf" class="input-box" >
    </div>
    <div class="input-group">
        <label>4. Textile (%wt)</label>
        <input type="number" id="input_t" class="input-box" >
    </div>
    <div class="input-group">
        <label>5. Wood (%wt)</label>
        <input type="number" id="input_w" class="input-box" >
    </div>
    <div class="input-group">
        <label>6. Rubber and Leather (%wt)</label>
        <input type="number" id="input_lr" class="input-box" >
    </div>
        <div class="input-group">
        <label>7. Shell and Bone (%wt)</label>
        <input type="number" id="input_shell" class="input-box" >
    </div>
    <div class="input-group">
        <label>8. Glass and Tile (%wt)</label>
        <input type="number" id="input_glass" class="input-box" >
    </div>
    <div class="input-group">
        <label>9. Metal (%wt)</label>
        <input type="number" id="input_metal" class="input-box" >
    </div>
    <div class="input-group">
        <label>10. Stone and Ceramic (%wt)</label>
        <input type="number" id="input_stone" class="input-box" >
    </div>
    <div class="input-group">
        <label>11. Other (%wt)</label>
        <input type="number" id="input_other" class="input-box" >
    </div>
    <div class="input-group">
        <label>Moisture (%wt)</label>
        <input type="number" id="input_m" class="input-box" >
    </div>

</div>

        <div id="total-check-area" style="grid-column: span 3; text-align: right; font-weight: bold; margin-bottom: -10px;">
        Current Total: <span id="current-total" style="color: red;">0.00</span> %
    </div>

    <button onclick="startCalculation()" style="padding: 15px; background: #003366; color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1rem; width: 100%; margin-top: 10px;">
        Calculate HHV
    </button>
    
</div>


      <div class="output-col">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%;">
        <div class="input-group">
            <label>HHV as received (kJ/kg)</label>
            <div id="display_hhv" class="output-box">0</div>
        </div>
        <div class="input-group">
            <label>HHV dry basis (kJ/kg)</label>
            <div id="display_hhv_db" class="output-box" style="background-color: #D3D3D3;">0</div>
        </div>
    </div>
</div>

<div class="calculation-container second-calculator">
    <h3 style="color: var(--primary-blue);">Adjusting for New Moisture Content</h3>
    
    <div class="new-calc-row">
    <div class="input-group">
        <label>New Moisture (%wt)</label>
        <input type="number" id="new_m" class="input-box">
    </div>

    <button class="btn-calculate small-btn" onclick="calculateNewHHV()">
        Calculate New HHV
    </button>

    <div class="input-group">
        <label>New HHV as received (kJ/kg)</label>
        <div id="new_hhv_display" class="output-box small-output">0</div>
    </div>

    <div class="input-group">
        <label>New HHV dry basis (kJ/kg)</label>
        <div id="new_hhv_db_display" class="output-box small-output" style="background-color: #D3D3D3;">0</div>
    </div>
</div>

    </div>
    </section>

  <div class="footer-top-border"></div> 
  <footer>
    <div class="footer-content">
      
      <div class="f-col-info">
        <div class="footer-logo-area">
        <img src="image/PP AND MSW LOGO.png" style="height: 80px;"></div>
        <h3>Heating Value Calculation and Municipal Solid Waste (MSW)</h3>
        <h3 style="margin-top:0;">Power Plant Potential Assessment System</h3>
        <p>
          Mathematical Modeling for Predicting Calorific Value and Electrical Power Generation from MSW
        </p>
      </div>

      <div class="f-col-menu">
        <div class="f-title">MENU</div>
        <ul class="f-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="HHV_test.html">HHV Calculator</a></li>
          <li><a href="PPformularTest1.html">Power Plant Performance</a></li>
          <li><a href="manual.html">User Manual</a></li>
        </ul>
      </div>

      <div class="f-col-contact">
        <div class="f-title">Contact Us</div>
        <div class="contact-detail">
          <p><strong>The Waste Incineration Research Center (WIRC)</strong></p>
          <p>Department of Mechanical and Aerospace Engineering</p>
          <p>King Mongkut's University of Technology North Bangkok 1518 </p>
          <p>Pibulsongkram Road, Bangsue, Bangkok 10800 </p>
          <p style="margin-top: 15px;">Email: somrat.k@eng.kmutnb.ac.th</p>
        </div>
      </div>

    </div>

    <div class="copyright">
      Copyright © 2026 WIRC, KMUTNB. All Rights Reserved.
    </div>
  </footer>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('sideMenu');
      const overlay = document.getElementById('menuOverlay');
      menu.classList.toggle('active');
      overlay.classList.toggle('active');
    }

// ฟังก์ชันใหม่: ใช้รวมค่าจากทุกช่องที่มีเลข
function calculateCurrentTotal() {
    const ids = ['fw', 'pa', 'pf', 't', 'w', 'lr', 'shell', 'glass', 'metal', 'stone', 'other'];
    let total = 0;
    ids.forEach(id => {
        const val = parseFloat(document.getElementById('input_' + id).value) || 0;
        total += val;
    });
    
    // อัปเดตตัวเลขบนหน้าจอ
    const display = document.getElementById('current-total');
    display.innerText = total.toFixed(2);
    
    // ถ้าครบ 100 เป็นสีเขียว ไม่ครบเป็นสีแดง
    display.style.color = (Math.abs(total - 100) < 0.01) ? "#28a745" : "#dc3545";
    return total;
}

// สั่งให้ทุกครั้งที่พิมพ์เลข ให้คำนวณผลรวมทันที
document.addEventListener('input', function(e) {
    if(e.target.classList.contains('input-box')) {
        calculateCurrentTotal();
    }
});

async function startCalculation() {
    // 1. ดึงค่าจากช่อง input ทั้งหมดมาก่อน
    const getValue = (id) => document.getElementById('input_' + id).value;
    
    const fields = ['fw', 'pa', 'pf', 't', 'w', 'lr', 'shell', 'glass', 'metal', 'stone', 'other', 'm'];
    const values = {};
    let hasEmpty = false;

    // ตรวจสอบว่ามีช่องไหนว่าง (ลืมกรอก) หรือไม่
    for (let id of fields) {
        const val = getValue(id);
        if (val === "") {
            hasEmpty = true;
            break;
        }
        values[id] = parseFloat(val);
    }

    // --- ส่วนที่เพิ่มใหม่: เตือนให้กรอกให้ครบทุกช่องก่อน ---
    if (hasEmpty) {
        alert("Please fill in all composition fields (Enter 0 if none).");
        return;
    }

    // --- 2. เช็คผลรวม 11 ช่องแรก (ต้องได้ 100%) ---
    const currentTotal = calculateCurrentTotal();
    if (Math.abs(currentTotal - 100) > 0.01) {
        alert("Total composition must equal 100% (Current: " + currentTotal.toFixed(2) + "%)");
        return;
    }

    // 3. เริ่มขั้นตอนส่งข้อมูลไป Backend
    document.getElementById('display_hhv').innerText = "...";

    try {
        const response = await fetch('https://quietistic-kamden-unlibidinously.ngrok-free.dev/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(values) // ส่ง values ที่เราวนลูปเก็บไว้ด้านบน
        });

        const data = await response.json();

        if (data.success) {
            document.getElementById('display_hhv').innerText = data.hhv.toFixed(2);
        } else {
            alert("Error: " + data.error);
            document.getElementById('display_hhv').innerText = "0";
        }
    } catch (error) {
        console.error(error);
        alert("Cannot connect to the backend! Please check if ngrok is running.");
        document.getElementById('display_hhv').innerText = "0";
    }

// ... ภายในฟังก์ชัน startCalculation() ตรงที่รับ data สำเร็จ ...

if (data.success) {
    const hhv_ar = data.hhv;
    const moisture = parseFloat(document.getElementById('input_m').value) || 0;

    // 1. แสดงค่า As Received (ที่ได้จากโมเดล)
    document.getElementById('display_hhv').innerText = hhv_ar.toFixed(2);

    // 2. คำนวณและแสดงค่า Dry Basis
    // สูตร: HHV_db = HHV_ar / (1 - (M/100))
    const hhv_db = hhv_ar / (1 - (moisture / 100));
    
    document.getElementById('display_hhv_db').innerText = isFinite(hhv_db) ? hhv_db.toFixed(2) : "0";
}
    // ---------------------------------------

    // 1. ดึงค่าจากช่อง input (เหมือนเดิมของคุณ)
    const fw = document.getElementById('input_fw').value;
    const pa = document.getElementById('input_pa').value;
    const pf = document.getElementById('input_pf').value;
    const t  = document.getElementById('input_t').value;
    const w  = document.getElementById('input_w').value;
    const lr = document.getElementById('input_lr').value;
    const shell = document.getElementById('input_shell').value;
    const glass = document.getElementById('input_glass').value;
    const metal = document.getElementById('input_metal').value;
    const stone = document.getElementById('input_stone').value;
    const other = document.getElementById('input_other').value;
    const m  = document.getElementById('input_m').value;

    // ถ้าลืมกรอกข้อมูลให้เตือน (เพิ่มให้ครบทุกช่อง)
    if(!fw || !pa || !pf || !t || !w || !lr || !shell || !glass || !metal || !stone || !other || !m) {
        alert("Please fill in all fields (Enter 0 if none).");
        return;
    }

    document.getElementById('display_hhv').innerText = "...";

    try {
        // 2. ส่งข้อมูลไปที่ Backend (เหมือนเดิม)
        const response = await fetch('https://quietistic-kamden-unlibidinously.ngrok-free.dev/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                fw: parseFloat(fw), pa: parseFloat(pa), pf: parseFloat(pf),
                t: parseFloat(t), w: parseFloat(w), lr: parseFloat(lr),
                shell: parseFloat(shell), glass: parseFloat(glass), metal: parseFloat(metal),
                stone: parseFloat(stone), other: parseFloat(other), m: parseFloat(m)
            })
        });

        const data = await response.json();

        if (data.success) {
            // 3. แสดงผลลัพธ์ (เหมือนเดิม)
            document.getElementById('display_hhv').innerText = data.hhv.toFixed(2);
        } else {
            alert("Error: " + data.error);
            document.getElementById('display_hhv').innerText = "0";
        }
    } catch (error) {
        console.error(error);
        alert("Cannot connect to the backend! Please check if ngrok is running.");
        document.getElementById('display_hhv').innerText = "0";
    }
 }
// --- ฟังก์ชันคำนวณ HHV ใหม่ตามความชื้นที่เปลี่ยนไป (วางต่อท้ายสุด) ---
function calculateNewHHV() {
    // 1. ดึงค่า HHV เดิม (As Received) จากการคำนวณครั้งแรก
    const hhv_old = parseFloat(document.getElementById('display_hhv').innerText);
    // 2. ดึงค่าความชื้นเดิม
    const m_old_percent = parseFloat(document.getElementById('input_m').value);
    // 3. ดึงค่าความชื้นใหม่
    const m_new_percent = parseFloat(document.getElementById('new_m').value);

    // ตรวจสอบความพร้อมของข้อมูล
    if (isNaN(hhv_old) || hhv_old === 0) {
        alert("Please complete the primary HHV calculation first.");
        return;
    }
    if (isNaN(m_new_percent)) {
        alert("Please enter the new moisture content.");
        return;
    }

    // แปลง % เป็นทศนิยม
    const m_old = m_old_percent / 100;
    const m_new = m_new_percent / 100;

    // คำนวณค่า Dry Basis (ซึ่งค่านี้จะคงที่ ไม่ว่าความชื้นจะเปลี่ยนไปเท่าไหร่)
    const hhv_db = hhv_old / (1 - m_old);

    // คำนวณค่า New As Received จากค่า Dry Basis
    const hhv_new_ar = hhv_db * (1 - m_new);

    // --- แสดงผลทั้ง 2 ช่อง ---
    
    // แสดง New As Received
    document.getElementById('new_hhv_display').innerText = hhv_new_ar.toLocaleString(undefined, {
        minimumFractionDigits: 2, 
        maximumFractionDigits: 2
    });

    // แสดง New Dry Basis (ซึ่งต้องเท่ากับค่า Dry Basis ของครั้งแรก)
    document.getElementById('new_hhv_db_display').innerText = hhv_db.toLocaleString(undefined, {
        minimumFractionDigits: 2, 
        maximumFractionDigits: 2
    });
}
</script> 

</body>
</html>