<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HHV cal Test</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-blue: #003366;
    --dark-footer: #1a2533;
    --accent-yellow: #f5c242;
    --text-grey: #666;
    --input-bg: #f3f6f9; /* สีพื้นหลังช่องกรอกข้อมูล */
    --result-blue: #8bcae6; /* สีฟ้ากล่องผลลัพธ์ */
  }

  body {
    font-family: 'Sarabun', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #fff;
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* --- 1. Header (คงเดิม) --- */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 40px;
    background-color: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    border-bottom: 1px solid #eee;
  }
  .header-left { display: flex; align-items: center; gap: 15px; }
  .logos { display: flex; gap: 10px; align-items: center; }
  .logos img { height: 50px; width: auto; }
  .brand-text { border-left: 1px solid #ddd; padding-left: 15px; }
  .brand-text h1 { font-size: 1.2rem; font-weight: 700; color: var(--primary-blue); margin: 0; }
  .brand-text p { font-size: 0.8rem; color: var(--text-grey); margin: 0; }
  .header-right { display: flex; align-items: center; gap: 20px; }
  .nav-link { text-decoration: none; color: var(--text-grey); font-size: 0.95rem; }
  .lang-switch { border: 1px solid var(--primary-blue); border-radius: 20px; padding: 4px 15px; color: var(--primary-blue); font-size: 0.9rem; cursor: pointer; }
  .hamburger { font-size: 1.5rem; color: var(--primary-blue); cursor: pointer; }

/* ================== ส่วนที่เพิ่ม: CSS สำหรับ Side Menu (เพื่อให้เด้งออกมาเหมือนในรูป) ================== */
  .menu-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6); display: none; z-index: 999;
  }
  .menu-overlay.active { display: block; }

  .side-menu {
    position: fixed; top: 0; right: -400px;
    width: 350px; height: 100%;
    background-color: #1a2533; z-index: 1000;
    transition: 0.4s ease; box-shadow: -5px 0 15px rgba(0,0,0,0.3);
    border-radius: 20px 0 0 20px; color: white; overflow-y: auto;
  }
  .side-menu.active { right: 0; }
  .menu-content { padding: 40px 25px; text-align: center; }
  .close-btn { position: absolute; top: 20px; left: 20px; font-size: 2rem; cursor: pointer; color: white; }
  .menu-links { display: flex; flex-direction: column; gap: 12px; margin-top: 30px; }
  .menu-links a {
    display: block; padding: 14px; color: white; text-decoration: none;
    border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; transition: 0.3s;
    font-size: 0.95rem; text-align: left;
  }
  .menu-links a:hover { background-color: rgba(255,255,255,0.1); color: var(--accent-yellow); border-color: white; }
  /* ========================================================================================= */


  /* --- 2. Hero Section (แก้ไขและเพิ่มเติม) --- */
  .hero {
    text-align: center;
    padding: 60px 20px 80px 20px;
    max-width: 1200px;
    margin: 0 auto;
    flex: 1;
  }
  .hero h2 { font-size: 2.2rem; color: var(--primary-blue); margin-bottom: 10px; font-weight: 600; }
  .hero p.subtitle { font-size: 1rem; color: var(--text-grey); margin-bottom: 50px; line-height: 1.6; }

 /* --- ส่วนที่เพิ่มใหม่: Calculation Layout --- */

  .calculation-container {

    display: flex;

    flex-direction: column;   /* แนวตั้ง */

    align-items: center;      /* กลางแนวนอน */

    justify-content: center;

    gap: 30px;

    flex-wrap: wrap; /* รองรับมือถือ (ปัดตกบรรทัด) */

  }



  /* Input */

  .input-col {

    width: 320px;

    display: flex;

    flex-direction: column;

    gap: 20px;

  }

  .input-group label {

    display: block;

    font-size: 0.9rem;

    color: #888;

    margin-bottom: 8px;

  }

  .input-box {

    width: 100%;

    padding: 15px;

    background-color: var(--input-bg);

    border: none;

    border-radius: 12px;

    font-size: 1rem;

    color: #333;

    box-sizing: border-box;

    outline: none;

    transition: 0.2s;

  }

  .input-box:focus {

    box-shadow: 0 0 0 2px #d1e3f8;

  }





  /* Output */



  .output-col {



    width: 320px;      /* กำหนดความกว้างให้เท่ากับช่องกรอกด้านบน */

    margin: 0 auto;    /* บรรทัดนี้สำคัญ: สั่งให้คอลัมน์ขยับมาอยู่กึ่งกลางหน้าจอ */

    display: flex;     /* ใช้ Flexbox เพื่อจัดการของข้างใน */

    flex-direction: column;

    align-items: center; /* จัดให้ Label และ Box อยู่กึ่งกลางของคอลัมน์ */

}



  .output-box {

    width: 320px;

    height: 100px; /* ความสูงของกล่องผลลัพธ์ */

    background-color: var(--result-blue);

    border-radius: 15px;

    display: flex;

    align-items: center;

    justify-content: center;

    font-size: 1.8rem;

    font-weight: bold;

    color: white; /* หรือสีน้ำเงินเข้มตามชอบ */

    margin-top: 8px;

    box-shadow: 0 4px 10px rgba(139, 202, 230, 0.4);

  }
  
  /* ================== CSS Footer (คงเดิม) ================== */
  footer {
    background-color: #161F2B;
    color: #ffffff;
    font-family: 'Sarabun', sans-serif;
    margin-top: auto;
  }
  .footer-content {
    display: flex;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding: 60px 20px;
  }
  .f-col-info { flex: 2; padding-right: 40px; }
  .f-col-info h3 { margin: 5px 0; font-size: 1.1rem; }
  .f-col-info p { color: #ccc; font-size: 0.9rem; margin-top: 10px; line-height: 1.6; }
  .f-col-menu { flex: 1; border-left: 1px dashed rgba(255,255,255,0.3); padding-left: 40px; }
  .f-col-contact { flex: 1.5; border-left: 1px dashed rgba(255,255,255,0.3); padding-left: 40px; }
  .f-title { font-weight: bold; margin-bottom: 20px; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; }
  .f-links { list-style: none; padding: 0; }
  .f-links li { margin-bottom: 12px; }
  .f-links a { color: #dddddd; text-decoration: none; transition: 0.3s; }
  .f-links a:hover { color: #ffca28; }
  .contact-detail p { margin-bottom: 8px; color: #ccc; font-size: 0.9rem; }
  .copyright { background-color: #0f151d; text-align: center; padding: 20px; font-size: 0.8rem; color: #666; border-top: 1px solid rgba(255,255,255,0.05); }

  /* Responsive เล็กน้อย เพื่อให้เวลาจอมือถือ กล่องไม่ชนกัน */
  @media (max-width: 900px) {
    .calculation-container {
      flex-direction: column;
      gap: 30px;
    }
.arrow {
  width: 6px;
  height: 70px;
  background-color: #003366;
  position: relative;
  margin: 10px auto;
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
}

.arrow::after {
  content: "";
  position: absolute;
  bottom: -14px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-top: 16px solid #003366;
}
  }
</style>

</head>
<body>

  <div id="menuOverlay" class="menu-overlay" onclick="toggleMenu()"></div>
  <div id="sideMenu" class="side-menu">
      <div class="menu-content">
          <div class="close-btn" onclick="toggleMenu()">×</div>
          <div class="menu-header">
              <h2>WIRC-MSW Model</h2>
              <p>Mathematical Model for MSW in Developing Countries</p>
          </div>
          <nav class="menu-links">
              <a href="index.html" onclick="toggleMenu()">Home</a>
              <a href="HHV_test.html" onclick="toggleMenu()">HHV Calculator</a>
              <a href="PPformularTest1.html" onclick="toggleMenu()">Power Plant Performance</a>
              <a href="PPformularTest1.html" onclick="toggleMenu()">Simulation and Calculation</a>
              <a href="manual.html" onclick="toggleMenu()">User Manual</a>
              <a href="#" onclick="toggleMenu()">Contact Us</a>
          </nav>
      </div>
  </div>

  <header>
    <div class="header-left">
      <div class="logos">
        <img src="image/KMUTNB LOGO.png" style="height: 50px;">
        <img src="image/MAE LOGO.png" style="height: 50px;">
        <img src="image/WRIC LOGO.png" style="height: 50px;">
      </div>

      <div class="brand-text">
        <h1>WIRC-MSW Model</h1>
        <p>Mathematical Model for MSW in Developing Countries</p>
      </div>
    </div>
    <div class="header-right">
      <a href="manual.html" class="nav-link">User Manual</a>
      <div class="lang-switch">TH | EN</div>
      <div class="hamburger" onclick="toggleMenu()">☰</div>
    </div>
  </header>

  <section class="hero">
    <h2>ทำนายค่าความร้อน (HHV Predicting)</h2>
    <p class="subtitle">
      ประเมินค่าความร้อน (HHV) จากองค์ประกอบขยะ (Physical Composition) เหมาะสำหรับการวิเคราะห์เชื้อเพลิงเบื้องต้น 
    </p>

    <div class="calculation-container">
      
    <div class="input-col">
    <div class="input-group">
        <label>1. Food Waste (%wt)</label>
        <input type="number" id="input_fw" class="input-box" >
    </div>
    <div class="input-group">
        <label>2. Paper (%wt)</label>
        <input type="number" id="input_pf" class="input-box" >
    </div>
    <div class="input-group">
        <label>3. Plastic and Foam Waste (%wt)</label>
        <input type="number" id="input_pa" class="input-box" >
    </div>
    <div class="input-group">
        <label>4. Textile (%wt)</label>
        <input type="number" id="input_t" class="input-box" >
    </div>
    <div class="input-group">
        <label>5. Wood (%wt)</label>
        <input type="number" id="input_w" class="input-box" >
    </div>
    <div class="input-group">
        <label>6. Rubber and Leather (%wt)</label>
        <input type="number" id="input_lr" class="input-box" >
    </div>
    
    <div class="input-group"><label>7. Shell and Bone (%wt)</label><input type="number" id="input_shell" class="input-box"></div>
    <div class="input-group"><label>8. Glass and Tile (%wt)</label><input type="number" id="input_glass" class="input-box"></div>
    <div class="input-group"><label>9. Metal (%wt)</label><input type="number" id="input_metal" class="input-box"></div>
    <div class="input-group"><label>10. Stone and Ceramic (%wt)</label><input type="number" id="input_stone" class="input-box"></div>
    <div class="input-group"><label>11. Other (%wt)</label><input type="number" id="input_other" class="input-box"></div>

    <button onclick="startCalculation()" style="padding: 15px; background: #003366; color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1rem; width: 100%; margin-top: 10px;">
        คำนวณค่า HHV
    </button>
</div>

      </div>

      <div class="output-col">
    <div class="input-group">
        <label>HHV (kJ/kg)</label>
        <div id="display_hhv" class="output-box">0</div>
    </div>
</div>

    </div>
    </section>

  <div class="footer-top-border"></div> 
  <footer>
    <div class="footer-content">
      
      <div class="f-col-info">
        <div class="footer-logo-area">
        <img src="image/PP AND MSW LOGO.png" style="height: 80px;"></div>
        <h3>ระบบคำนวณค่าความร้อน</h3>
        <h3 style="margin-top:0;">และประเมินศักยภาพโรงไฟฟ้าพลังงานขยะชุมชน</h3>
        <p>
          แบบจำลองทางคณิตศาสตร์สำหรับทำนายค่าความร้อนและพลังงานไฟฟ้า 
          (MSW Heating Value & Power Generation)
        </p>
      </div>

      <div class="f-col-menu">
        <div class="f-title">MENU</div>
        <ul class="f-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="HHV_test.html">HHV Calculator</a></li>
          <li><a href="PPformularTest1.html">Power Plant Performance</a></li>
          <li><a href="PPformularTest1.html">Simulation and Calculation</a></li>
          <li><a href="manual.html">User Manual</a></li>
        </ul>
      </div>

      <div class="f-col-contact">
        <div class="f-title">ติดต่อเรา (Contact Us)</div>
        <div class="contact-detail">
          <p><strong>The Waste Incineration Research Center (WIRC)</strong></p>
          <p>Department of Mechanical and Aerospace Engineering</p>
          <p>King Mongkut's University of Technology North Bangkok 1518 </p>
          <p>Pibulsongkram Road, Bangsue, Bangkok 10800 </p>
          <p style="margin-top: 15px;">Email: somrat.k@eng.kmutnb.ac.th</p>
        </div>
      </div>

    </div>

    <div class="copyright">
      Copyright © 2026 WIRC, KMUTNB. All Rights Reserved.
    </div>
  </footer>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('sideMenu');
      const overlay = document.getElementById('menuOverlay');
      menu.classList.toggle('active');
      overlay.classList.toggle('active');
    }

async function startCalculation() {
    // 1. ดึงค่าจากช่อง input ด้วย ID ที่เราตั้งไว้ข้างบน
    const fw = document.getElementById('input_fw').value;
    const pf = document.getElementById('input_pf').value;
    const pa = document.getElementById('input_pa').value;
    const t  = document.getElementById('input_t').value;
    const w  = document.getElementById('input_w').value;
    const lr = document.getElementById('input_lr').value;

    // ถ้าลืมกรอกข้อมูลให้เตือน
    if(!fw || !pf || !pa || !t || !w || !lr) {
        alert("กรุณากรอกค่า Food, Plastic, Paper, Textile, Wood และ Rubber");
        return;
    }

    // เปลี่ยนเลข 0 เป็นจุดไข่ปลาเพื่อบอกว่ากำลังคำนวณ
    document.getElementById('display_hhv').innerText = "...";

    try {
        // 2. ส่งข้อมูลไปที่ Backend (Python) ที่พอร์ต 5000
        const response = await fetch('https://quietistic-kamden-unlibidinously.ngrok-free.dev/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                fw: parseFloat(fw),
                pf: parseFloat(pf),
                pa: parseFloat(pa),
                t:  parseFloat(t),
                w:  parseFloat(w),
                lr: parseFloat(lr)
            })
        });

        const data = await response.json();

        if (data.success) {
            // 3. แสดงผลลัพธ์ที่ MATLAB ส่งกลับมา
            document.getElementById('display_hhv').innerText = data.hhv.toFixed(2);
        } else {
            alert("Error: " + data.error);
            document.getElementById('display_hhv').innerText = "0";
        }
    } catch (error) {
        console.error(error);
        alert("เชื่อมต่อ Backend ไม่ได้! เช็คว่ารัน py app.py ในหน้าจอดำค้างไว้หรือยัง?");
        document.getElementById('display_hhv').innerText = "0";
    }
}
</script>

</body>
</html>